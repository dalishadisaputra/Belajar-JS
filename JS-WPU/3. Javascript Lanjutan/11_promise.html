<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>

<body>

    <!-- <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script> -->
    <script>

        // Asynchronous Callback
        // const xhr = new XMLHttpRequest();
        // xhr.onreadystatechange = function () {
        //     if (xhr.status === 200) {
        //         if (xhr.readyState === 4) {
        //             console.log(JSON.parse(xhr.response));
        //         }
        //     } else {
        //         console.log(xhr.responseText);
        //     }
        // }

        // xhr.open('get', 'https://jsonplaceholder.typicode.com/users/');
        // xhr.send();

        // fetch('https://jsonplaceholder.typicode.com/users/')
        //     .then(response => response.json())
        //     .then(response => console.log(response));

        // Promise = sebuah object yang merepresentasikan keberhasilan / kegagalan sebuah event yang asynchronous di masa yang akan datang
        // janji (terpenuhi / ingkar)
        // states (fulfilled / rejected / pending)
        // callback (resolve / reject / finally)
        // aksi (then / catch)

        // contoh 1
        // let ditepati = true;
        // const janji1 = new Promise((resolve, reject) => {
        //     if (ditepati) {
        //         resolve('Janji telah ditepati!');
        //     } else {
        //         reject('Ingkar Janji..');
        //     }

        // });

        // console.log(janji1);
        // janji1
        //     .then(respon => console.log('OK! : ' + respon))
        //     .catch(respon => console.log('NOT OK! :' + respon))

        // contoh 2
        // let ditepati = true;
        // const janji2 = new Promise((resolve, reject) => {
        //     if (ditepati) {
        //         setTimeout(() => {
        //             resolve('Ditepati setelah beberapa waktu!');
        //         }, 2000);
        //     } else {
        //         setTimeout(() => {
        //             resolve('Tidak ditepati setelah beberapa waktu!');
        //         }, 2000);
        //     }
        // });

        // console.log('mulai');
        // // console.log(janji2.then(() => console.log(janji2)));
        // janji2
        //     .finally(() => console.log('selesai Menunggu'))
        //     .then(respon => console.log('OK! : ' + respon))
        //     .catch(respon => console.log('NOT OK!: ' + respon));
        // console.log('selesai');

        // // promise.all()

        const film = new Promise(resolve => {
            setTimeout(() => {
                resolve([{
                    judul: 'Spiderman',
                    sutradara: 'Dalis Hadi',
                    pemeran: 'Maryam'

                }])
            }, 1000);
        });

        const cuaca = new Promise(resolve => {
            setTimeout(() => {
                resolve([{
                    kota: 'Dumai',
                    temp: 34,
                    kondisi: 'cerah berawan'
                }])
            }, 500);
        });

        // film.then(respon => console.log(respon));
        // cuaca.then(respon => console.log(respon));

        Promise.all([film, cuaca])
            // .then(respon => console.log(respon));

            //     // kalau ingin dipisah menggunakan spred operator
            .then(respon => {
                const [film, cuaca] = respon;
                console.log(film);
                console.log(cuaca);
            });

    </script>


</body>

</html>